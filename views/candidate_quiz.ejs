<%- include('includes/_header') %>

    <head>
        <%- include('layouts/head') %>
    </head>


    <body>
                <div id="back-button">
                    <div class="filter">
                        <a class="text-black" href="/quizzes"><i class="fas fa-angle-double-left text-black"></i> Back to
                            Quizzes</a>
                    </div>
                </div>
        <div id="email-form-greeting">
            <%- include('layouts/welcome') %>
        </div>

        <br>
        <h2>Candidate Quiz</h2>


        <p>
            Employer Name: <%=login_name %>
        </p>
        <p>
            Quiz Name: <%= quiz.name %> 
        </p>
        <p>
          ID: <%= id %>
        </p>
        <p>
           QuizID:  <%= id %>
        </p>

        <p>
            Owner: <%= owner %>
        </p>

        <% let multiple = 0; %>
        <card class="card-body" id="quiz-cards">

            <ul class="list-group">
                <% questions.forEach(question=> { %>
                    <li class="list-group-item card">
                        <div class="card-header">
                            <%= question.prompt %>
                        </div>
                        <div class="card-body">
                            <form>
                            <% if (question.type == "multiple_choice") { %>
                                <% 
                                    question.choices.push(question.answer); 
                                    let shuffled = [].concat(question.choices);
                                    shuffled.sort(() => {
                                        return 0.5 - Math.random();
                                    });
                                    let current = 0;
                                %>

                                <% for (let i = 0; i < 4; i++) { %>
                                    <% 
                                        let current_radio = String(multiple) + String(i);
                                        let current_value = shuffled[i];
                                     %>
                                    <label for=<%=current_radio%>><%=current_value%></label>
                                    <input type="radio" name=<%= "mc_" + multiple %> id=<%= current_radio %> value=<%= current_value %> >

                                    <% current += 1; %>
                                <% } %>
                                <% multiple += 1; %>
                            <% } else if (question.type == "true_or_false") { %>

                            <% } else if (question.type == "check_all") { %>

                            <% } else if (question.type == "fill") { %>

                            <% } %>
                            </form>
                        </div>
                    </li>
                    <hr>
                <% }) %>
            </ul>

        </card>

            <!-- Submission Button -->
            <div class="manage-quiz-button">
                    <input type="hidden" name="quiz" >
                    <input type="hidden" name="name" >
                <a id="manage-quiz-button" href=<%="/contact?id=" + id %> class="btn btn-success">Send Quiz</a>

            </div>
            <%- include('includes/_footer') %>

    </body>